<dump>
  <flight_plan security_height="25" qfu="270" name="Versatile" max_dist_from_home="1500" lon0="1.2729" lat0="43.4622" home_mode_height="50" ground_alt="0" alt="75">
    <header>#include "subsystems/datalink/datalink.h"
#include "firmwares/fixedwing/combi_switch.h"
#include "firmwares/fixedwing/takeoff_gyro.h"</header>
    <waypoints>
      <waypoint y="0" x="0" name="HOME"/>
      <waypoint y="80" x="20" name="STDBY"/>
      <waypoint y="102.2" x="44.8" name="1"/>
      <waypoint y="122.9" x="-63.5" name="2"/>
      <waypoint y="-50" x="-20" name="R1"/>
      <waypoint y="-25" x="-20" name="R2"/>
      <waypoint y="0" x="-20" name="R3"/>
      <waypoint y="25" x="-20" name="R4"/>
      <waypoint y="50" x="-20" name="R5"/>
    </waypoints>
    <exceptions/>
    <blocks>
      <block name="Wait GPS" no="0">
        <set var="kill_throttle" value="1" no="0"/>
        <while cond="!GpsFixValid()" no="1"/>
      </block>
      <block name="Geo init" no="1">
        <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
        <call fun="NavSetGroundReferenceHere()" no="2"/>
      </block>
      <block name="Holding point" no="2">
        <set var="kill_throttle" value="1" no="0"/>
        <attitude vmode="throttle" throttle="0" roll="0" no="1"/>
      </block>
      <block strip_button="Takeoff" name="Takeoff" no="3">
        <exception deroute="Standby" cond="estimator_z > 210"/>
        <set var="kill_throttle" value="0" no="0"/>
        <set var="combi_switch_status" value="0" no="1"/>
        <attitude vmode="throttle" throttle="1.0" roll="0.0" pitch="30.0" no="2"/>
      </block>
      <block strip_icon="home.png" strip_button="Standby" name="Standby" no="4">
        <set var="combi_switch_status" value="1" no="0"/>
        <circle wp="STDBY" radius="nav_radius" no="1"/>
      </block>
      <block strip_icon="eight.png" strip_button="Figure 8 (wp 1-2)" name="Figure 8" no="5">
        <eight turn_around="2" radius="nav_radius" center="1" no="1"/>
      </block>
      <block strip_icon="oval.png" strip_button="Oval (wp 1-2)" name="Oval 1-2" no="6">
        <oval radius="nav_radius" p2="2" p1="1" no="1"/>
      </block>
      <block name="Route" no="7">
        <go wp="R1" no="0"/>
        <while cond="TRUE" no="1">
          <go wp="R2" hmode="route" from="R1" approaching_time="route_ap_time" no="2"/>
          <go wp="R3" hmode="route" from="R2" approaching_time="route_ap_time" no="3"/>
          <go wp="R4" hmode="route" from="R3" approaching_time="route_ap_time" no="4"/>
          <go wp="R5" hmode="route" from="R4" approaching_time="route_ap_time" no="5"/>
          <go wp="R1" hmode="route" from="R5" approaching_time="route_ap_time" no="6"/>
        </while>
      </block>
      <block name="HOME" no="8">
        <home no="0"/>
      </block>
    </blocks>
  </flight_plan>
  <stages>
    <stage block="8" block_name="HOME" stage="0">
      <home no="0"/>
    </stage>
    <stage block="7" block_name="Route" stage="6">
      <go wp="R1" hmode="route" from="R5" approaching_time="route_ap_time" no="6"/>
    </stage>
    <stage block="7" block_name="Route" stage="5">
      <go wp="R5" hmode="route" from="R4" approaching_time="route_ap_time" no="5"/>
    </stage>
    <stage block="7" block_name="Route" stage="4">
      <go wp="R4" hmode="route" from="R3" approaching_time="route_ap_time" no="4"/>
    </stage>
    <stage block="7" block_name="Route" stage="3">
      <go wp="R3" hmode="route" from="R2" approaching_time="route_ap_time" no="3"/>
    </stage>
    <stage block="7" block_name="Route" stage="2">
      <go wp="R2" hmode="route" from="R1" approaching_time="route_ap_time" no="2"/>
    </stage>
    <stage block="7" block_name="Route" stage="1">
      <while cond="TRUE" no="1">
        <go wp="R2" hmode="route" from="R1" approaching_time="route_ap_time" no="2"/>
        <go wp="R3" hmode="route" from="R2" approaching_time="route_ap_time" no="3"/>
        <go wp="R4" hmode="route" from="R3" approaching_time="route_ap_time" no="4"/>
        <go wp="R5" hmode="route" from="R4" approaching_time="route_ap_time" no="5"/>
        <go wp="R1" hmode="route" from="R5" approaching_time="route_ap_time" no="6"/>
      </while>
    </stage>
    <stage block="7" block_name="Route" stage="0">
      <go wp="R1" no="0"/>
    </stage>
    <stage block="6" block_name="Oval 1-2" stage="1">
      <oval radius="nav_radius" p2="2" p1="1" no="1"/>
    </stage>
    <stage block="5" block_name="Figure 8" stage="1">
      <eight turn_around="2" radius="nav_radius" center="1" no="1"/>
    </stage>
    <stage block="4" block_name="Standby" stage="1">
      <circle wp="STDBY" radius="nav_radius" no="1"/>
    </stage>
    <stage block="4" block_name="Standby" stage="0">
      <set var="combi_switch_status" value="1" no="0"/>
    </stage>
    <stage block="3" block_name="Takeoff" stage="2">
      <attitude vmode="throttle" throttle="1.0" roll="0.0" pitch="30.0" no="2"/>
    </stage>
    <stage block="3" block_name="Takeoff" stage="1">
      <set var="combi_switch_status" value="0" no="1"/>
    </stage>
    <stage block="3" block_name="Takeoff" stage="0">
      <set var="kill_throttle" value="0" no="0"/>
    </stage>
    <stage block="2" block_name="Holding point" stage="1">
      <attitude vmode="throttle" throttle="0" roll="0" no="1"/>
    </stage>
    <stage block="2" block_name="Holding point" stage="0">
      <set var="kill_throttle" value="1" no="0"/>
    </stage>
    <stage block="1" block_name="Geo init" stage="2">
      <call fun="NavSetGroundReferenceHere()" no="2"/>
    </stage>
    <stage block="1" block_name="Geo init" stage="0">
      <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
    </stage>
    <stage block="0" block_name="Wait GPS" stage="1">
      <while cond="!GpsFixValid()" no="1"/>
    </stage>
    <stage block="0" block_name="Wait GPS" stage="0">
      <set var="kill_throttle" value="1" no="0"/>
    </stage>
  </stages>
</dump>
